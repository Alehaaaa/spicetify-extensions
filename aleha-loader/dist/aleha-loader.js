(async()=>{for(;!Spicetify.React||!Spicetify.ReactDOM;)await new Promise(e=>setTimeout(e,10));var i,l,n,s,a,r,o,d,c,u,p,f,m,e,t,g,h,y,v,b,w,S,x;async function E(){{for(var e;null==(e=null==(e=window.Spicetify)?void 0:e.Platform)||!e.History;)await new Promise(e=>setTimeout(e,300));function a(e){return e.toLowerCase().replace(/\s+/g,"-")}let n=JSON.parse(null!=(t=localStorage.getItem(x))?t:"{}");var t=await fetch(w).then(e=>e.json()).then(e=>e.filter(e=>"file"===e.type&&e.name.endsWith(".js")).map(e=>({name:e.name.replace(/\.js$/,""),raw:S+"/"+e.name})));let i=new v(b+" Loader","ale-loader-settings");t.forEach(e=>{let t=a(e.name);i.addToggle(t," â€¢ "+e.name,!1!==n[t],void 0,{onChange:e=>{n[t]=e.currentTarget.checked}})}),i.addButton("save-and-reload","Persist changes and reload Spotify","Save & Reload",()=>{localStorage.setItem(x,JSON.stringify(n)),window.location.reload()}),i.pushSettings(),await Promise.all(t.filter(e=>!1!==n[a(e.name)]).map(t=>fetch(t.raw).then(e=>e.text()).then(e=>{try{new Function(e)(),console.log("[Loader] loaded "+t.name)}catch(e){console.error("[Loader] failed "+t.name,e)}})))}}i=Object.create,l=Object.defineProperty,n=Object.defineProperties,s=Object.getOwnPropertyDescriptor,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertyNames,o=Object.getOwnPropertySymbols,d=Object.getPrototypeOf,c=Object.prototype.hasOwnProperty,u=Object.prototype.propertyIsEnumerable,p=(e,t,n)=>t in e?l(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,f=(e,t)=>{for(var n in t=t||{})c.call(t,n)&&p(e,n,t[n]);if(o)for(var n of o(t))u.call(t,n)&&p(e,n,t[n]);return e},m=(e,t)=>n(e,a(t)),g=(e=(e,t)=>function(){return t||(0,e[r(e)[0]])((t={exports:{}}).exports,t),t.exports})({"external-global-plugin:react-dom"(e,t){t.exports=Spicetify.ReactDOM}}),h=(t=(e,t,n)=>(n=null!=e?i(d(e)):{},((t,n,i,a)=>{if(n&&"object"==typeof n||"function"==typeof n)for(let e of r(n))c.call(t,e)||e===i||l(t,e,{get:()=>n[e],enumerable:!(a=s(n,e))||a.enumerable});return t})(!t&&e&&e.__esModule?n:l(n,"default",{value:e,enumerable:!0}),e)))(e({"external-global-plugin:react"(e,t){t.exports=Spicetify.React}})()),y=t(g()),v=class{constructor(e,t,n={}){this.name=e,this.settingsId=t,this.initialSettingsFields=n,this.settingsFields=this.initialSettingsFields,this.setRerender=null,this.pushSettings=async()=>{var e;for(Object.entries(this.settingsFields).forEach(([e,t])=>{"button"!==t.type&&void 0===this.getFieldValue(e)&&this.setFieldValue(e,t.defaultValue)});null==(e=null==(e=null==Spicetify?void 0:Spicetify.Platform)?void 0:e.History)||!e.listen;)await new Promise(e=>setTimeout(e,100));this.stopHistoryListener&&this.stopHistoryListener(),this.stopHistoryListener=Spicetify.Platform.History.listen(e=>{"/preferences"===e.pathname&&this.render()}),"/preferences"===Spicetify.Platform.History.location.pathname&&await this.render()},this.rerender=()=>{this.setRerender&&this.setRerender(Math.random())},this.render=async()=>{for(;!document.getElementById("desktop.settings.selectLanguage");){if("/preferences"!==Spicetify.Platform.History.location.pathname)return;await new Promise(e=>setTimeout(e,100))}var e=document.querySelector(".main-view-container__scroll-node-child main div");if(!e)return console.error("[spcr-settings] settings container not found");let t=Array.from(e.children).find(e=>e.id===this.settingsId);t?console.log(t):((t=document.createElement("div")).id=this.settingsId,e.appendChild(t)),y.default.render(h.default.createElement(this.FieldsContainer,null),t)},this.addButton=(e,t,n,i,a)=>{this.settingsFields[e]={type:"button",description:t,value:n,events:f({onClick:i},a)}},this.addInput=(e,t,n,i,a,l)=>{this.settingsFields[e]={type:"input",description:t,defaultValue:n,inputType:a,events:f({onChange:i},l)}},this.addHidden=(e,t)=>{this.settingsFields[e]={type:"hidden",defaultValue:t}},this.addToggle=(e,t,n,i,a)=>{this.settingsFields[e]={type:"toggle",description:t,defaultValue:n,events:f({onChange:i},a)}},this.addDropDown=(e,t,n,i,a,l)=>{this.settingsFields[e]={type:"dropdown",description:t,defaultValue:n[i],options:n,events:f({onSelect:a},l)}},this.getFieldValue=e=>null==(e=JSON.parse(Spicetify.LocalStorage.get(this.settingsId+"."+e)||"{}"))?void 0:e.value,this.setFieldValue=(e,t)=>{Spicetify.LocalStorage.set(this.settingsId+"."+e,JSON.stringify({value:t}))},this.FieldsContainer=()=>{var[e,t]=(0,h.useState)(0);return this.setRerender=t,h.default.createElement("div",{className:"x-settings-section",key:e},h.default.createElement("h2",{className:"TypeElement-cello-textBase-type"},this.name),Object.entries(this.settingsFields).map(([e,t])=>h.default.createElement(this.Field,{nameId:e,field:t})))},this.Field=n=>{var e=this.settingsId+"."+n.nameId;let t;if(t="button"===n.field.type?n.field.value:this.getFieldValue(n.nameId),"hidden"===n.field.type)return h.default.createElement(h.default.Fragment,null);let[i,a]=(0,h.useState)(t),l=e=>{void 0!==e&&(a(e),this.setFieldValue(n.nameId,e))};return h.default.createElement("div",{className:"x-settings-row"},h.default.createElement("div",{className:"x-settings-firstColumn"},h.default.createElement("label",{className:"TypeElement-viola-textSubdued-type",htmlFor:e},n.field.description||"")),h.default.createElement("div",{className:"x-settings-secondColumn"},"input"===n.field.type?h.default.createElement("input",m(f({className:"x-settings-input",id:e,dir:"ltr",value:i,type:n.field.inputType||"text"},n.field.events),{onChange:e=>{l(e.currentTarget.value);var t=null==(t=n.field.events)?void 0:t.onChange;t&&t(e)}})):"button"===n.field.type?h.default.createElement("span",null,h.default.createElement("button",m(f({id:e,className:"Button-sc-y0gtbx-0 Button-buttonSecondary-small-useBrowserDefaultFocusStyle encore-text-body-small-bold x-settings-button"},n.field.events),{onClick:e=>{l();var t=null==(t=n.field.events)?void 0:t.onClick;t&&t(e)},"data-encore-id":"buttonSecondary",type:"button"}),i)):"toggle"===n.field.type?h.default.createElement("label",{className:"x-settings-secondColumn x-toggle-wrapper"},h.default.createElement("input",m(f({id:e,className:"x-toggle-input",type:"checkbox",checked:i},n.field.events),{onClick:e=>{l(e.currentTarget.checked);var t=null==(t=n.field.events)?void 0:t.onClick;t&&t(e)}})),h.default.createElement("span",{className:"x-toggle-indicatorWrapper"},h.default.createElement("span",{className:"x-toggle-indicator"}))):"dropdown"===n.field.type?h.default.createElement("select",m(f({className:"main-dropDown-dropDown",id:e},n.field.events),{onChange:e=>{l(n.field.options[e.currentTarget.selectedIndex]);var t=null==(t=n.field.events)?void 0:t.onChange;t&&t(e)}}),n.field.options.map((e,t)=>h.default.createElement("option",{selected:e===i,value:t+1},e))):h.default.createElement(h.default.Fragment,null)))}}},w=`https://api.github.com/repos/${b="Alehaaaa"}/${e="spicetify-extensions"}/contents/${t="aleha-loader"}/extensions`,S=`https://raw.githubusercontent.com/${b}/${e}/main/${t}/extensions`,x="LoaderStates",(async()=>{await E()})()})();